{% extends 'base.html.twig' %}

{% block title %}Liste des affectations{% endblock %}

{% block list %}
    {# <h1>Affectations index</h1>

    <table class="table">
        <thead>
            <tr>
                <th>Id</th>
                <th>Date_Affectation_at</th>
                <th>actions</th>
            </tr>
        </thead>
        <tbody>
        {% for Affectation in Affectations %}
            <tr>
                <td>{{ Affectation.id }}</td>
                <td>{{ Affectation.DateAffectationAt ? Affectation.DateAffectationAt|date('Y-m-d') : '' }}</td>
                <td>
                    <a href="{{ path('app_Affectations_show', {'id': Affectation.id}) }}">show</a>
                    <a href="{{ path('app_Affectations_edit', {'id': Affectation.id}) }}">edit</a>
                </td>
            </tr>
        {% else %}
            <tr>
                <td colspan="3">no records found</td>
            </tr>
        {% endfor %}
        </tbody>
    </table>

    <a href="{{ path('app_Affectations_new') }}">Create new</a> #}


    {# <div style="text-align:right; margin-top:20px"> <a class="btn btn-success"  href="{{path('app_Affectations_new')}}"> <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="bi bi-plus-circle" viewBox="0 0 16 16">
            <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"/>
            <path d="M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4z"/>
        </svg> &nbsp; Nouveau Affectation</a></div> #}

    <div class="" style=" display: flex; flex-wrap: wrap;justify-content: space-between;margin-top:20px"> 

 <div class="s002">
      <form action = "{{path('app_Affectations_index' )}}" method= "post">
        
        <div class="inner-form">
          <div class="input-field first-wrap">
            <div class="icon-wrap">
               
            </div>
            <input name = "key" id="key" type="texte" placeholder="Rechercher un document"  />
          </div>
          <div class="input-field second-wrap">
            <div class="icon-wrap">
              <p style="padding-top:-5px; z-index:1"></p>
            </div>
           <input title="Date de debut" name ="begin" type="date" placeholder="Date de debut" value="{{ begin}}" />
          </div>
          <div class="input-field third-wrap">
            <div class="icon-wrap">
               
            </div>
            <input title="Date de fin"  name="end" id="return" type="date" placeholder="Date de fin" value="{{ end}}" />
          </div>
           
          <div class="input-field fifth-wrap">
            <button class="btn-search" type="submit" name = "submit">Filtrer</button>
          </div>
        </div>
      </form>
    </div>

 
 
</div>

 

 
<div style="background-color : white;border-top : 0.5px solid #c4c4c;margin-top:10px">
<table class="table table-responsive table-hover expensive display dataTable dtr-inline collapsed" id="expensive" style="width: 100%;" >
        <thead style="background-color : #e9ecee;">
            <tr style="font-weight : bold; text-transform : uppercase"> 
                <td style="text-align : center; width : 5%">N°</td> 
                  <td style="text-align : center; width : 10%">Date Affectation</td> 
                <td style="text-align : center; width : 20%">Reference</td>
                 <td style="text-align : center; width : 20%">Objet</td>
                <td style="text-align : center; width : 10%">Expéditeur</td>            
                <td style="text-align : center; width : 10%">Destinataire</td>
                <td style="text-align : center; width : 15%">Actions</td> 
            </tr> 
        </thead>
         <tbody> 
        {% for Affectation in Affectations %}
          <tr> 
                <td style="text-align : center; width : 5%">{{ numero}}</td> 

                <td style="text-align : center;width : 10%">{{ Affectation.DateAffectationAt ? Affectation.DateAffectationAt|date('d-m-Y') : '' }}</td> 

                <td style="width : 20%"> 
                    {# {% if  Affectation.document.Reference|length > 20 %}
                        {{  Affectation.document.Reference|split('', 20)[0] }} ...
                    {% else %}
                        {{  Affectation.document.Reference }}
                    {% endif %}#}
                    {{  Affectation.document.Reference }}
                </td> 
                <td style="width : 20%">
                    {# {% if Affectation.document.Objet|length > 100 %}
                        {{ Affectation.document.Objet|split('', 100)[0] }} ...
                    {% else %}
                        {{ Affectation.document.Objet }}
                    {% endif %} #}
                    {{ Affectation.document.Objet }}
                </td> 
                <td style="width : 10%"> {{ Affectation.Envoyeur}}</td> 
                <td style="width : 10%">{{  Affectation.Agent? Affectation.Agent.Prenom ~"  "~ Affectation.Agent.Nom : Affectation.Receveur ? Affectation.Receveur:""   }}</td>   
                <td style="text-align : left; width : 15%">

                    {% if (user.niveau == "Admin" or  (Affectation.Envoyeur == user.zone or Affectation.Document.PosteOwner.Fonction == user.zone or (direction and Affectation.Envoyeur == direction.Code)))  and  Affectation.status == false %}
                        <form method="post" action="{{ path('app_Affectations_delete', {'id': Affectation.id}) }}" onsubmit="return confirm('Etes vous sûr de vouloir  supprimé cette affectation?');">
                            <a href="{{ path('app_Affectations_show', {'id': Affectation.id}) }}"  type="button" class="btn btn-success btn-circle">
                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-eye-fill" viewBox="0 0 16 16">
                                    <path d="M16 8s-3-5.5-8-5.5S0 8 0 8s3 5.5 8 5.5S16 8 16 8zM1.173 8a13.133 13.133 0 0 1 1.66-2.043C4.12 4.668 5.88 3.5 8 3.5c2.12 0 3.879 1.168 5.168 2.457A13.133 13.133 0 0 1 14.828 8c-.058.087-.122.183-.195.288-.335.48-.83 1.12-1.465 1.755C11.879 11.332 10.119 12.5 8 12.5c-2.12 0-3.879-1.168-5.168-2.457A13.134 13.134 0 0 1 1.172 8z"/>
                                    <path d="M8 5.5a2.5 2.5 0 1 0 0 5 2.5 2.5 0 0 0 0-5zM4.5 8a3.5 3.5 0 1 1 7 0 3.5 3.5 0 0 1-7 0z"/>
                                </svg>
                            </a>    
                            <a href="{{ path('app_Affectations_edit', {'id': Affectation.id}) }}"type="button" class="btn btn-warning btn-circle">    
                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-pencil-square-fill" viewBox="0 0 16 16">
                                    <path d="M15.502 1.94a.5.5 0 0 1 0 .706L14.459 3.69l-2-2L13.502.646a.5.5 0 0 1 .707 0l1.293 1.293zm-1.75 2.456-2-2L4.939 9.21a.5.5 0 0 0-.121.196l-.805 2.414a.25.25 0 0 0 .316.316l2.414-.805a.5.5 0 0 0 .196-.12l6.813-6.814z"/>
                                    <path fill-rule="evenodd" d="M1 13.5A1.5 1.5 0 0 0 2.5 15h11a1.5 1.5 0 0 0 1.5-1.5v-6a.5.5 0 0 0-1 0v6a.5.5 0 0 1-.5.5h-11a.5.5 0 0 1-.5-.5v-11a.5.5 0 0 1 .5-.5H9a.5.5 0 0 0 0-1H2.5A1.5 1.5 0 0 0 1 2.5v11z"/>
                                </svg>
                            </a>
                            <a title="Valider" href="{{ path('app_Affectations_valid', {'id': Affectation.id}) }}"  type="button" class="btn btn-success btn-circle">
                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-check" viewBox="0 0 16 16">
                                <path d="M10.97 4.97a.75.75 0 0 1 1.07 1.05l-3.99 4.99a.75.75 0 0 1-1.08.02L4.324 8.384a.75.75 0 1 1 1.06-1.06l2.094 2.093 3.473-4.425a.267.267 0 0 1 .02-.022z"/>
                                </svg>
                            </a>    
                            <input type="hidden" name="_token" value="{{ csrf_token('delete' ~ Affectation.id) }}">
                            <button  type="submit" title="Supprimer" class="btn btn-danger btn-circle">
                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-trash" viewBox="0 0 16 16"> 
                                    <path d="M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0V6z"/>
                                    <path fill-rule="evenodd" d="M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1v1zM4.118 4 4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4H4.118zM2.5 3V2h11v1h-11z"/> 
                                </svg>    
                            </button>
                        </form>
                    {% else %}
                        <a href="{{ path('app_Affectations_show', {'id': Affectation.id}) }}"  type="button" class="btn btn-success btn-circle">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-eye-fill" viewBox="0 0 16 16">
                            <path d="M16 8s-3-5.5-8-5.5S0 8 0 8s3 5.5 8 5.5S16 8 16 8zM1.173 8a13.133 13.133 0 0 1 1.66-2.043C4.12 4.668 5.88 3.5 8 3.5c2.12 0 3.879 1.168 5.168 2.457A13.133 13.133 0 0 1 14.828 8c-.058.087-.122.183-.195.288-.335.48-.83 1.12-1.465 1.755C11.879 11.332 10.119 12.5 8 12.5c-2.12 0-3.879-1.168-5.168-2.457A13.134 13.134 0 0 1 1.172 8z"/>
                            <path d="M8 5.5a2.5 2.5 0 1 0 0 5 2.5 2.5 0 0 0 0-5zM4.5 8a3.5 3.5 0 1 1 7 0 3.5 3.5 0 0 1-7 0z"/>
                        </svg>
                    </a>
                    {% endif %}
                </td> 
            </tr>  
            {% set numero = numero + 1 %}
        {% endfor %}
             
            </tbody>
    </table>
   </div> 
</div>
 
</div>


{% endblock %}

{% block footer %}

  <style>
  
        .footer {
        background-color:white;	
        color:black;
        }
        @media only screen and (min-width:1600px) {
            .footer {
                bottom:6px;
                margin-top: 2.5%; 
                width: 100%;
            }
        }
        @media only screen and (min-width:1900px) {
            .footer {
                bottom:6px;
                margin-top: 8%; 
                width: 100%;
            }
        }
  
  </style>

           <div class="footer" >
                        <div class="container">
                            <div class="footer__logo">
                                <div>
                                    <h3>SAGA</h3>
                                </div>
                            </div>
                            <div class="footer__nav">
                                <div class="footer__tline">
                                 

                                    <ul class="footer__social" >
                                        <li><a href="#">PRÉSENTATION</a></li>
                                        <li><a href="#">TABLEAU DE BORD</a></li> 
                                      
                                    </ul>
                                    
                                </div>
                                <div class="footer__bline">
                                  
                                    <ul class="footer__social">
                                         <li class="footer__copyright" style="margin-top: 10px; font-size:15px;font-weight:bold; color: blue;"><span>&copy;{{ dg }}République du Bénin le {{ "now"|date('d/m/Y') }}</span></li>
                                      
                                    </ul>
                                    {# <div class="footer__language-btn-m" data-dropdown-btn="language">Americas - English<i class="icon-Arrow_Below"></i></div> #}
                                </div>
                            </div>
                        </div>
                        <span style="display:flex ;margin-bottom:-5px;top:0:">
                        <i style="width: 100%; height:8px;  padding: 0px; background-color:RGB(16,135,87);"> </i>
                        <i style="width: 100%  ;  height:8px; background-color:#FFD400;"> </i>
                        <i style="width: 100% ; height:8px; background-color:rgb(235, 0, 0);"> </i>
                    
                    </span>
                    </div>
 
{% endblock %}